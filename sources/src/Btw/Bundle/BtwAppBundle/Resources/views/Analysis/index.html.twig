{% extends "BtwAppBundle::layout.html.twig" %}

{% block title 'Bundestagswahlen - Startseite' %}

{% block content %}
    <h1>Sitzverteilung im Bundestag, 2013</h1>
    <div class="lead row">
	<div class="col-md-8">
	    <div id="chart" style="width:100%; height:300px;"></div>
	</div>
	<div class="col-md-4">
	    <table class="table table-striped">
            {% for party in population %}
            <tr><th><span class="label" style="background: {{ party.color }}">&nbsp;&nbsp;</span>&nbsp; {{ party.name }}</th><td>{{ party.y }} Sitze</td></tr>
            {% endfor %}
	    </table>
	    <a href="#" class="small">&rarr; Mehr Details zur Wahl</a>
	</div>
    </div>

    <script type="text/javascript">
	!function () {
	    var DATA = {{ population | json_encode() | raw }};

	    // Build the chart
	    $('#chart').highcharts({
		chart : {
		    backgroundColor     : 'transparent',
		    plotBackgroundColor : null,
		    plotBorderWidth     : null,
		    plotShadow          : false
		},

		title : false,

		plotOptions : {
		    pie: {
			dataLabels: {
			    enabled: false
			},
			showInLegend: true,
			startAngle: -90,
			endAngle: 90,
			center: ['50%', '90%']
		    }
		},

		series : [
		    {
			type : 'pie',
			name : 'Sitze',
			innerSize: '75%',
			size : '180%',
			data : DATA
		    }
		]
	    });
	}();
    </script>
{% endblock %}
